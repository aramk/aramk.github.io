<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Resources Loaded in Crayon - Aram Kocharyan</title>
  <meta name="author" content="Aram Kocharyan">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="PFro7Lv2_YqOI4JXEYiAolZH1PcFeQ7YcZv_ZaD-ngc" />

  
  <link rel="canonical" href="http://aramk.com/blog/2012/12/10/resources-loaded-in-crayon">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="Aram Kocharyan" type="application/atom+xml">

  <link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">


  <script src="/javascripts/libs/jquery/jquery-2.0.3.min.js"></script>
  

</head>

  <body   >
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Aram Kocharyan</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="search navbar-form navbar-right" action="http://google.com/search" method="GET">
                    <input type="hidden" name="q" value="site:aramk.com">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9">
    <article class="hentry" role="article">
      
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-12-10T00:00:00+11:00" pubdate data-updated="true">Dec 10<span>th</span>, 2012</time>
        
      </p>
    
    
    <h1 class="entry-title">
        Resources Loaded in Crayon
        
    </h1>
    
  </header>


<div class="entry-content clearfix">I&#8217;ve made Crayon with modularity in mind to allow reuse of any components if needed. Here are the Javascript components:
<ul>
	<li>js/util.js</li>
	<li>js/crayon.js</li>
	<li>js/jquery.popup.js</li>
	<li>js/fancybox/jquery.fancybox.init.pack.js</li>
	<li>js/fancybox/fancybox_init.js</li>
	<li>util/tag-editor/crayon_te.js</li>
</ul>
`util.js` has several JavaScript methods that are shared across the admin settings, tag editor, theme editor (coming soon) and of course the front end which displays the Crayons.

`crayon.js` is the main script which defines the toolbar button events and other settings, like toggling etc.

`jquery.popup.js` is adapted jquery plugin I use to open a code popup. As of the latest beta commit, disabling the popup now removes this resource.

`jquery.fancybox.init.pack.js` is a custom version of Fancybox I modified to allow passing in <a href="http://localsite.com/ak/crayon/initialising-fancybox-with-custom-objects/">my own fancybox instance</a> without disrupting other fancybox plugins that may be running - <a href="http://localsite.com/ak/projects/crayon-syntax-highlighter/#comment-720709080">otherwise errors occur</a>.

`fancybox_init.js` serves only the purpose of kickstarting Fancybox with my custom objects, and I agree this is somewhat wasteful of a single request. Although it&#8217;ll take less time to transfer than a larger file, I imagine there&#8217;s a fixed cost in the latency required to make the request. Mostly for the reason of reducing the number of modules needed, I&#8217;ve removed it in the latest beta commit and placed it in util.js.

`crayon_te.js` is the tag editor. This appears in the front end only if you check &#8220;Display the Tag Editor in any TinyMCE instances on the frontend (e.g. bbPress)&#8221; - which is off since 1.15 on fresh installs. Having &#8220;Attempt to load Crayon&#8217;s CSS and JavaScript only when needed&#8221; still needs TinyMCE to be disabled on the front end as <a href="http://localsite.com/ak/php/loading-css-and-javascript-only-when-required-in-a-wordpress-plugin/">I&#8217;ve now mentioned here</a>.

For CSS:
<ul>
	<li>css/crayon_style.css</li>
	<li>css/global_style.css</li>
	<li>js/fancybox/jquery.fancybox.css</li>
	<li>themes/classic/classic.css</li>
	<li>fonts/monaco.css</li>
</ul>
`crayon_style.css` is a the foundation style.
`global_style.css` are styles shared across the admin and front end (such as the tag editor, which can appear anywhere TinyMCE appears).
`jquery.fancybox.css` is once again for Fancybox and only loads if the Tag Editor is enabled on the front end.
`classic.css` is the classic theme. `monaco.css` is the default font. Since there can be any combination of the last two, mixing them is not practical.

By far the best technique to reduce the number of requests is to use <a href="http://wordpress.org/extend/plugins/w3-total-cache/" target="_blank">WP Total Cache</a>, which I have ensured Crayon is compatible with since 1.16. This will reduce the JS and CSS to a single file for the entire site. This allows the developer (me) to create modular and reusable components while allowing the client (you) and end users to experience better efficiency. Hope that helps!
</div>


      <footer>
        <p class="meta text-muted">
          
  

<span class="glyphicon glyphicon-user"></span> <span class="byline author vcard">Posted by <span class="fn">Aram Kocharyan</span></span>

          












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-12-10T00:00:00+11:00" pubdate data-updated="true">Dec 10<span>th</span>, 2012</time>
          


        </p>
        
          <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://aramk.com/blog/2012/12/10/resources-loaded-in-crayon/" data-via="" data-counturl="http://aramk.com/blog/2012/12/10/resources-loaded-in-crayon/" >Tweet</a>
  
  
  
</div>

        
        
          <ul class="meta text-muted pager">
            
            <li class="previous"><a href="/blog/2012/12/04/expanding-code-beyond-page-boundaries-in-crayon/" title="Previous Post: Expanding code beyond page boundaries in Crayon">&laquo; Expanding code beyond page boundaries in Crayon</a></li>
            
            
            <li class="next"><a href="/blog/2012/12/14/crayon-with-retina-support/" title="Next Post: Crayon with Retina Support">Crayon with Retina Support &raquo;</a></li>
            
          </ul>
        
      </footer>
    </article>
    
  </div>

  
  <aside class="sidebar col-md-3">
    
      <section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/blog/2013/05/28/jekyll/">Hello Jekyll, Goodbye Wordpress</a>
    
    <a class="list-group-item " href="/blog/2013/01/15/minimizing-code-in-crayon/">Minimizing Code in Crayon</a>
    
    <a class="list-group-item " href="/blog/2013/01/03/creating-a-simple-wordpress-widget/">Creating a Simple Wordpress Widget</a>
    
    <a class="list-group-item " href="/blog/2012/12/30/php-sending-an-email-attachment/">PHP: Sending an Email Attachment</a>
    
    <a class="list-group-item " href="/blog/2012/12/30/php-get-files-in-a-directory-recursively/">PHP: Get Files in a Directory Recursively</a>
    
  </div>
</section>






    
  </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2016 - Aram Kocharyan<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    <script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr-2.0.js"></script>








  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  </body>
</html>
